# Дождитесь завершения работы подпрограммы

Учитывая, что система запускает подпрограмму,
должен быть способ дождаться завершения работы подпрограммы.
Есть два популярных способа сделать это:

- Используйте `sync.WaitGroup`.
  Сделайте это, если есть несколько подпрограмм, выполнения которых вы хотите дождаться

    ```go
    var wg sync.WaitGroup
    for i := 0; i < N; i++ {
      wg.Add(1)
      go func() {
        defer wg.Done()
        // ...
      }()
    }

    // To wait for all to finish:
    wg.Wait()
    ```

- Добавьте еще одну `chan struct{}`, которую программа закрывает по завершении работы.
  Сделайте это, если есть только одна программа.

    ```go
    done := make(chan struct{})
    go func() {
      defer close(done)
      // ...
    }()

    // Дождаться завершения работы программы:
    <-done
    ```
